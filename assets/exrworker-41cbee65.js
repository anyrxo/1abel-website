(function(){"use strict";/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ae="165",ve="",Ie="srgb-linear";class Fe{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const o=s.indexOf(e);o!==-1&&s.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,t);t.target=null}}}const it=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function fe(){const g=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(it[g&255]+it[g>>8&255]+it[g>>16&255]+it[g>>24&255]+"-"+it[t&255]+it[t>>8&255]+"-"+it[t>>16&15|64]+it[t>>24&255]+"-"+it[e&63|128]+it[e>>8&255]+"-"+it[e>>16&255]+it[e>>24&255]+it[n&255]+it[n>>8&255]+it[n>>16&255]+it[n>>24&255]).toLowerCase()}function bt(g,t,e){return Math.max(t,Math.min(e,g))}class $t{constructor(t=0,e=0){$t.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(bt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),o=this.x-t.x,l=this.y-t.y;return this.x=o*n-l*s+t.x,this.y=o*s+l*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Kt{constructor(t,e,n,s,o,l,u,h,a){Kt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,s,o,l,u,h,a)}set(t,e,n,s,o,l,u,h,a){const p=this.elements;return p[0]=t,p[1]=s,p[2]=u,p[3]=e,p[4]=o,p[5]=h,p[6]=n,p[7]=l,p[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,o=this.elements,l=n[0],u=n[3],h=n[6],a=n[1],p=n[4],d=n[7],y=n[2],f=n[5],w=n[8],z=s[0],k=s[3],U=s[6],V=s[1],D=s[4],Y=s[7],H=s[2],q=s[5],L=s[8];return o[0]=l*z+u*V+h*H,o[3]=l*k+u*D+h*q,o[6]=l*U+u*Y+h*L,o[1]=a*z+p*V+d*H,o[4]=a*k+p*D+d*q,o[7]=a*U+p*Y+d*L,o[2]=y*z+f*V+w*H,o[5]=y*k+f*D+w*q,o[8]=y*U+f*Y+w*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],s=t[2],o=t[3],l=t[4],u=t[5],h=t[6],a=t[7],p=t[8];return e*l*p-e*u*a-n*o*p+n*u*h+s*o*a-s*l*h}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],o=t[3],l=t[4],u=t[5],h=t[6],a=t[7],p=t[8],d=p*l-u*a,y=u*h-p*o,f=a*o-l*h,w=e*d+n*y+s*f;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const z=1/w;return t[0]=d*z,t[1]=(s*a-p*n)*z,t[2]=(u*n-s*l)*z,t[3]=y*z,t[4]=(p*e-s*h)*z,t[5]=(s*o-u*e)*z,t[6]=f*z,t[7]=(n*h-a*e)*z,t[8]=(l*e-n*o)*z,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,s,o,l,u){const h=Math.cos(o),a=Math.sin(o);return this.set(n*h,n*a,-n*(h*l+a*u)+l+t,-s*a,s*h,-s*(-a*l+h*u)+u+e,0,0,1),this}scale(t,e){return this.premultiply(ye.makeScale(t,e)),this}rotate(t){return this.premultiply(ye.makeRotation(-t)),this}translate(t,e){return this.premultiply(ye.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<9;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const ye=new Kt;function Ue(g){return document.createElementNS("http://www.w3.org/1999/xhtml",g)}function xe(g){return g<.04045?g*.0773993808:Math.pow(g*.9478672986+.0521327014,2.4)}let Yt;class ii{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Yt===void 0&&(Yt=Ue("canvas")),Yt.width=t.width,Yt.height=t.height;const n=Yt.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Yt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Ue("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const s=n.getImageData(0,0,t.width,t.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=xe(o[l]/255)*255;return n.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(xe(e[n]/255)*255):e[n]=xe(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let ni=0;class si{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ni++}),this.uuid=fe(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(_e(s[l].image)):o.push(_e(s[l]))}else o=_e(s);n.url=o}return e||(t.images[this.uuid]=n),n}}function _e(g){return typeof HTMLImageElement<"u"&&g instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&g instanceof ImageBitmap?ii.getDataURL(g):g.data?{data:Array.from(g.data),width:g.width,height:g.height,type:g.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ri=0;class vt extends Fe{constructor(t=vt.DEFAULT_IMAGE,e=vt.DEFAULT_MAPPING,n=1001,s=1001,o=1006,l=1008,u=1023,h=1009,a=vt.DEFAULT_ANISOTROPY,p=ve){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ri++}),this.uuid=fe(),this.name="",this.source=new si(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=a,this.format=u,this.internalFormat=null,this.type=h,this.offset=new $t(0,0),this.repeat=new $t(1,1),this.center=new $t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==300)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}vt.DEFAULT_IMAGE=null,vt.DEFAULT_MAPPING=300,vt.DEFAULT_ANISOTROPY=1;class jt{constructor(t=0,e=0,n=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=s}static slerpFlat(t,e,n,s,o,l,u){let h=n[s+0],a=n[s+1],p=n[s+2],d=n[s+3];const y=o[l+0],f=o[l+1],w=o[l+2],z=o[l+3];if(u===0){t[e+0]=h,t[e+1]=a,t[e+2]=p,t[e+3]=d;return}if(u===1){t[e+0]=y,t[e+1]=f,t[e+2]=w,t[e+3]=z;return}if(d!==z||h!==y||a!==f||p!==w){let k=1-u;const U=h*y+a*f+p*w+d*z,V=U>=0?1:-1,D=1-U*U;if(D>Number.EPSILON){const H=Math.sqrt(D),q=Math.atan2(H,U*V);k=Math.sin(k*q)/H,u=Math.sin(u*q)/H}const Y=u*V;if(h=h*k+y*Y,a=a*k+f*Y,p=p*k+w*Y,d=d*k+z*Y,k===1-u){const H=1/Math.sqrt(h*h+a*a+p*p+d*d);h*=H,a*=H,p*=H,d*=H}}t[e]=h,t[e+1]=a,t[e+2]=p,t[e+3]=d}static multiplyQuaternionsFlat(t,e,n,s,o,l){const u=n[s],h=n[s+1],a=n[s+2],p=n[s+3],d=o[l],y=o[l+1],f=o[l+2],w=o[l+3];return t[e]=u*w+p*d+h*f-a*y,t[e+1]=h*w+p*y+a*d-u*f,t[e+2]=a*w+p*f+u*y-h*d,t[e+3]=p*w-u*d-h*y-a*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,s){return this._x=t,this._y=e,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,s=t._y,o=t._z,l=t._order,u=Math.cos,h=Math.sin,a=u(n/2),p=u(s/2),d=u(o/2),y=h(n/2),f=h(s/2),w=h(o/2);switch(l){case"XYZ":this._x=y*p*d+a*f*w,this._y=a*f*d-y*p*w,this._z=a*p*w+y*f*d,this._w=a*p*d-y*f*w;break;case"YXZ":this._x=y*p*d+a*f*w,this._y=a*f*d-y*p*w,this._z=a*p*w-y*f*d,this._w=a*p*d+y*f*w;break;case"ZXY":this._x=y*p*d-a*f*w,this._y=a*f*d+y*p*w,this._z=a*p*w+y*f*d,this._w=a*p*d-y*f*w;break;case"ZYX":this._x=y*p*d-a*f*w,this._y=a*f*d+y*p*w,this._z=a*p*w-y*f*d,this._w=a*p*d+y*f*w;break;case"YZX":this._x=y*p*d+a*f*w,this._y=a*f*d+y*p*w,this._z=a*p*w-y*f*d,this._w=a*p*d-y*f*w;break;case"XZY":this._x=y*p*d-a*f*w,this._y=a*f*d-y*p*w,this._z=a*p*w+y*f*d,this._w=a*p*d+y*f*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],s=e[4],o=e[8],l=e[1],u=e[5],h=e[9],a=e[2],p=e[6],d=e[10],y=n+u+d;if(y>0){const f=.5/Math.sqrt(y+1);this._w=.25/f,this._x=(p-h)*f,this._y=(o-a)*f,this._z=(l-s)*f}else if(n>u&&n>d){const f=2*Math.sqrt(1+n-u-d);this._w=(p-h)/f,this._x=.25*f,this._y=(s+l)/f,this._z=(o+a)/f}else if(u>d){const f=2*Math.sqrt(1+u-n-d);this._w=(o-a)/f,this._x=(s+l)/f,this._y=.25*f,this._z=(h+p)/f}else{const f=2*Math.sqrt(1+d-n-u);this._w=(l-s)/f,this._x=(o+a)/f,this._y=(h+p)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(bt(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const s=Math.min(1,e/n);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,s=t._y,o=t._z,l=t._w,u=e._x,h=e._y,a=e._z,p=e._w;return this._x=n*p+l*u+s*a-o*h,this._y=s*p+l*h+o*u-n*a,this._z=o*p+l*a+n*h-s*u,this._w=l*p-n*u-s*h-o*a,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,s=this._y,o=this._z,l=this._w;let u=l*t._w+n*t._x+s*t._y+o*t._z;if(u<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),u>=1)return this._w=l,this._x=n,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const f=1-e;return this._w=f*l+e*this._w,this._x=f*n+e*this._x,this._y=f*s+e*this._y,this._z=f*o+e*this._z,this.normalize(),this}const a=Math.sqrt(h),p=Math.atan2(a,u),d=Math.sin((1-e)*p)/a,y=Math.sin(e*p)/a;return this._w=l*d+this._w*y,this._x=n*d+this._x*y,this._y=s*d+this._y*y,this._z=o*d+this._z*y,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(s*Math.sin(t),s*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(t=0,e=0,n=0){$.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Re.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Re.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,s=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*s,this.y=o[1]*e+o[4]*n+o[7]*s,this.z=o[2]*e+o[5]*n+o[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,o=t.elements,l=1/(o[3]*e+o[7]*n+o[11]*s+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*s+o[12])*l,this.y=(o[1]*e+o[5]*n+o[9]*s+o[13])*l,this.z=(o[2]*e+o[6]*n+o[10]*s+o[14])*l,this}applyQuaternion(t){const e=this.x,n=this.y,s=this.z,o=t.x,l=t.y,u=t.z,h=t.w,a=2*(l*s-u*n),p=2*(u*e-o*s),d=2*(o*n-l*e);return this.x=e+h*a+l*d-u*p,this.y=n+h*p+u*a-o*d,this.z=s+h*d+o*p-l*a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,s=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*s,this.y=o[1]*e+o[5]*n+o[9]*s,this.z=o[2]*e+o[6]*n+o[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,s=t.y,o=t.z,l=e.x,u=e.y,h=e.z;return this.x=s*h-o*u,this.y=o*l-n*h,this.z=n*u-s*l,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return ge.copy(this).projectOnVector(t),this.sub(ge)}reflect(t){return this.sub(ge.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(bt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return e*e+n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const s=Math.sin(e)*t;return this.x=s*Math.sin(n),this.y=Math.cos(e)*t,this.z=s*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ge=new $,Re=new jt;class It{constructor(t,e,n,s,o,l,u,h,a,p,d,y,f,w,z,k){It.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,s,o,l,u,h,a,p,d,y,f,w,z,k)}set(t,e,n,s,o,l,u,h,a,p,d,y,f,w,z,k){const U=this.elements;return U[0]=t,U[4]=e,U[8]=n,U[12]=s,U[1]=o,U[5]=l,U[9]=u,U[13]=h,U[2]=a,U[6]=p,U[10]=d,U[14]=y,U[3]=f,U[7]=w,U[11]=z,U[15]=k,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new It().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,s=1/qt.setFromMatrixColumn(t,0).length(),o=1/qt.setFromMatrixColumn(t,1).length(),l=1/qt.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,s=t.y,o=t.z,l=Math.cos(n),u=Math.sin(n),h=Math.cos(s),a=Math.sin(s),p=Math.cos(o),d=Math.sin(o);if(t.order==="XYZ"){const y=l*p,f=l*d,w=u*p,z=u*d;e[0]=h*p,e[4]=-h*d,e[8]=a,e[1]=f+w*a,e[5]=y-z*a,e[9]=-u*h,e[2]=z-y*a,e[6]=w+f*a,e[10]=l*h}else if(t.order==="YXZ"){const y=h*p,f=h*d,w=a*p,z=a*d;e[0]=y+z*u,e[4]=w*u-f,e[8]=l*a,e[1]=l*d,e[5]=l*p,e[9]=-u,e[2]=f*u-w,e[6]=z+y*u,e[10]=l*h}else if(t.order==="ZXY"){const y=h*p,f=h*d,w=a*p,z=a*d;e[0]=y-z*u,e[4]=-l*d,e[8]=w+f*u,e[1]=f+w*u,e[5]=l*p,e[9]=z-y*u,e[2]=-l*a,e[6]=u,e[10]=l*h}else if(t.order==="ZYX"){const y=l*p,f=l*d,w=u*p,z=u*d;e[0]=h*p,e[4]=w*a-f,e[8]=y*a+z,e[1]=h*d,e[5]=z*a+y,e[9]=f*a-w,e[2]=-a,e[6]=u*h,e[10]=l*h}else if(t.order==="YZX"){const y=l*h,f=l*a,w=u*h,z=u*a;e[0]=h*p,e[4]=z-y*d,e[8]=w*d+f,e[1]=d,e[5]=l*p,e[9]=-u*p,e[2]=-a*p,e[6]=f*d+w,e[10]=y-z*d}else if(t.order==="XZY"){const y=l*h,f=l*a,w=u*h,z=u*a;e[0]=h*p,e[4]=-d,e[8]=a*p,e[1]=y*d+z,e[5]=l*p,e[9]=f*d-w,e[2]=w*d-f,e[6]=u*p,e[10]=z*d+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(oi,t,ai)}lookAt(t,e,n){const s=this.elements;return ot.subVectors(t,e),ot.lengthSq()===0&&(ot.z=1),ot.normalize(),Dt.crossVectors(n,ot),Dt.lengthSq()===0&&(Math.abs(n.z)===1?ot.x+=1e-4:ot.z+=1e-4,ot.normalize(),Dt.crossVectors(n,ot)),Dt.normalize(),ae.crossVectors(ot,Dt),s[0]=Dt.x,s[4]=ae.x,s[8]=ot.x,s[1]=Dt.y,s[5]=ae.y,s[9]=ot.y,s[2]=Dt.z,s[6]=ae.z,s[10]=ot.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,o=this.elements,l=n[0],u=n[4],h=n[8],a=n[12],p=n[1],d=n[5],y=n[9],f=n[13],w=n[2],z=n[6],k=n[10],U=n[14],V=n[3],D=n[7],Y=n[11],H=n[15],q=s[0],L=s[4],Mt=s[8],ut=s[12],St=s[1],K=s[5],et=s[9],kt=s[13],pt=s[2],Ot=s[6],at=s[10],dt=s[14],Et=s[3],st=s[7],rt=s[11],zt=s[15];return o[0]=l*q+u*St+h*pt+a*Et,o[4]=l*L+u*K+h*Ot+a*st,o[8]=l*Mt+u*et+h*at+a*rt,o[12]=l*ut+u*kt+h*dt+a*zt,o[1]=p*q+d*St+y*pt+f*Et,o[5]=p*L+d*K+y*Ot+f*st,o[9]=p*Mt+d*et+y*at+f*rt,o[13]=p*ut+d*kt+y*dt+f*zt,o[2]=w*q+z*St+k*pt+U*Et,o[6]=w*L+z*K+k*Ot+U*st,o[10]=w*Mt+z*et+k*at+U*rt,o[14]=w*ut+z*kt+k*dt+U*zt,o[3]=V*q+D*St+Y*pt+H*Et,o[7]=V*L+D*K+Y*Ot+H*st,o[11]=V*Mt+D*et+Y*at+H*rt,o[15]=V*ut+D*kt+Y*dt+H*zt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],s=t[8],o=t[12],l=t[1],u=t[5],h=t[9],a=t[13],p=t[2],d=t[6],y=t[10],f=t[14],w=t[3],z=t[7],k=t[11],U=t[15];return w*(+o*h*d-s*a*d-o*u*y+n*a*y+s*u*f-n*h*f)+z*(+e*h*f-e*a*y+o*l*y-s*l*f+s*a*p-o*h*p)+k*(+e*a*d-e*u*f-o*l*d+n*l*f+o*u*p-n*a*p)+U*(-s*u*p-e*h*d+e*u*y+s*l*d-n*l*y+n*h*p)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],o=t[3],l=t[4],u=t[5],h=t[6],a=t[7],p=t[8],d=t[9],y=t[10],f=t[11],w=t[12],z=t[13],k=t[14],U=t[15],V=d*k*a-z*y*a+z*h*f-u*k*f-d*h*U+u*y*U,D=w*y*a-p*k*a-w*h*f+l*k*f+p*h*U-l*y*U,Y=p*z*a-w*d*a+w*u*f-l*z*f-p*u*U+l*d*U,H=w*d*h-p*z*h-w*u*y+l*z*y+p*u*k-l*d*k,q=e*V+n*D+s*Y+o*H;if(q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/q;return t[0]=V*L,t[1]=(z*y*o-d*k*o-z*s*f+n*k*f+d*s*U-n*y*U)*L,t[2]=(u*k*o-z*h*o+z*s*a-n*k*a-u*s*U+n*h*U)*L,t[3]=(d*h*o-u*y*o-d*s*a+n*y*a+u*s*f-n*h*f)*L,t[4]=D*L,t[5]=(p*k*o-w*y*o+w*s*f-e*k*f-p*s*U+e*y*U)*L,t[6]=(w*h*o-l*k*o-w*s*a+e*k*a+l*s*U-e*h*U)*L,t[7]=(l*y*o-p*h*o+p*s*a-e*y*a-l*s*f+e*h*f)*L,t[8]=Y*L,t[9]=(w*d*o-p*z*o-w*n*f+e*z*f+p*n*U-e*d*U)*L,t[10]=(l*z*o-w*u*o+w*n*a-e*z*a-l*n*U+e*u*U)*L,t[11]=(p*u*o-l*d*o-p*n*a+e*d*a+l*n*f-e*u*f)*L,t[12]=H*L,t[13]=(p*z*s-w*d*s+w*n*y-e*z*y-p*n*k+e*d*k)*L,t[14]=(w*u*s-l*z*s-w*n*h+e*z*h+l*n*k-e*u*k)*L,t[15]=(l*d*s-p*u*s+p*n*h-e*d*h-l*n*y+e*u*y)*L,this}scale(t){const e=this.elements,n=t.x,s=t.y,o=t.z;return e[0]*=n,e[4]*=s,e[8]*=o,e[1]*=n,e[5]*=s,e[9]*=o,e[2]*=n,e[6]*=s,e[10]*=o,e[3]*=n,e[7]*=s,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),o=1-n,l=t.x,u=t.y,h=t.z,a=o*l,p=o*u;return this.set(a*l+n,a*u-s*h,a*h+s*u,0,a*u+s*h,p*u+n,p*h-s*l,0,a*h-s*u,p*h+s*l,o*h*h+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,s,o,l){return this.set(1,n,o,0,t,1,l,0,e,s,1,0,0,0,0,1),this}compose(t,e,n){const s=this.elements,o=e._x,l=e._y,u=e._z,h=e._w,a=o+o,p=l+l,d=u+u,y=o*a,f=o*p,w=o*d,z=l*p,k=l*d,U=u*d,V=h*a,D=h*p,Y=h*d,H=n.x,q=n.y,L=n.z;return s[0]=(1-(z+U))*H,s[1]=(f+Y)*H,s[2]=(w-D)*H,s[3]=0,s[4]=(f-Y)*q,s[5]=(1-(y+U))*q,s[6]=(k+V)*q,s[7]=0,s[8]=(w+D)*L,s[9]=(k-V)*L,s[10]=(1-(y+z))*L,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,n){const s=this.elements;let o=qt.set(s[0],s[1],s[2]).length();const l=qt.set(s[4],s[5],s[6]).length(),u=qt.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),t.x=s[12],t.y=s[13],t.z=s[14],_t.copy(this);const a=1/o,p=1/l,d=1/u;return _t.elements[0]*=a,_t.elements[1]*=a,_t.elements[2]*=a,_t.elements[4]*=p,_t.elements[5]*=p,_t.elements[6]*=p,_t.elements[8]*=d,_t.elements[9]*=d,_t.elements[10]*=d,e.setFromRotationMatrix(_t),n.x=o,n.y=l,n.z=u,this}makePerspective(t,e,n,s,o,l,u=2e3){const h=this.elements,a=2*o/(e-t),p=2*o/(n-s),d=(e+t)/(e-t),y=(n+s)/(n-s);let f,w;if(u===2e3)f=-(l+o)/(l-o),w=-2*l*o/(l-o);else if(u===2001)f=-l/(l-o),w=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=a,h[4]=0,h[8]=d,h[12]=0,h[1]=0,h[5]=p,h[9]=y,h[13]=0,h[2]=0,h[6]=0,h[10]=f,h[14]=w,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(t,e,n,s,o,l,u=2e3){const h=this.elements,a=1/(e-t),p=1/(n-s),d=1/(l-o),y=(e+t)*a,f=(n+s)*p;let w,z;if(u===2e3)w=(l+o)*d,z=-2*d;else if(u===2001)w=o*d,z=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=2*a,h[4]=0,h[8]=0,h[12]=-y,h[1]=0,h[5]=2*p,h[9]=0,h[13]=-f,h[2]=0,h[6]=0,h[10]=z,h[14]=-w,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const qt=new $,_t=new It,oi=new $(0,0,0),ai=new $(1,1,1),Dt=new $,ae=new $,ot=new $,ke=new It,Oe=new jt;class he{constructor(t=0,e=0,n=0,s=he.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,s=this._order){return this._x=t,this._y=e,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const s=t.elements,o=s[0],l=s[4],u=s[8],h=s[1],a=s[5],p=s[9],d=s[2],y=s[6],f=s[10];switch(e){case"XYZ":this._y=Math.asin(bt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,f),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(y,a),this._z=0);break;case"YXZ":this._x=Math.asin(-bt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(u,f),this._z=Math.atan2(h,a)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(bt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-l,a)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-bt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(y,f),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,a));break;case"YZX":this._z=Math.asin(bt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,a),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(u,f));break;case"XZY":this._z=Math.asin(-bt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(y,a),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-p,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return ke.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ke,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Oe.setFromEuler(this),this.setFromQuaternion(Oe,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}he.DEFAULT_ORDER="XYZ";class hi{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let li=0;const Ne=new $,Xt=new jt,Ft=new It,le=new $,te=new $,ci=new $,ui=new jt,Le=new $(1,0,0),De=new $(0,1,0),Pe=new $(0,0,1),He={type:"added"},pi={type:"removed"},Gt={type:"childadded",child:null},we={type:"childremoved",child:null};class Bt extends Fe{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:li++}),this.uuid=fe(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bt.DEFAULT_UP.clone();const t=new $,e=new he,n=new jt,s=new $(1,1,1);function o(){n.setFromEuler(e,!1)}function l(){e.setFromQuaternion(n,void 0,!1)}e._onChange(o),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new It},normalMatrix:{value:new Kt}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=Bt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Xt.setFromAxisAngle(t,e),this.quaternion.multiply(Xt),this}rotateOnWorldAxis(t,e){return Xt.setFromAxisAngle(t,e),this.quaternion.premultiply(Xt),this}rotateX(t){return this.rotateOnAxis(Le,t)}rotateY(t){return this.rotateOnAxis(De,t)}rotateZ(t){return this.rotateOnAxis(Pe,t)}translateOnAxis(t,e){return Ne.copy(t).applyQuaternion(this.quaternion),this.position.add(Ne.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Le,t)}translateY(t){return this.translateOnAxis(De,t)}translateZ(t){return this.translateOnAxis(Pe,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ft.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?le.copy(t):le.set(t,e,n);const s=this.parent;this.updateWorldMatrix(!0,!1),te.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ft.lookAt(te,le,this.up):Ft.lookAt(le,te,this.up),this.quaternion.setFromRotationMatrix(Ft),s&&(Ft.extractRotation(s.matrixWorld),Xt.setFromRotationMatrix(Ft),this.quaternion.premultiply(Xt.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(He),Gt.child=t,this.dispatchEvent(Gt),Gt.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(pi),we.child=t,this.dispatchEvent(we),we.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ft.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ft.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ft),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(He),Gt.child=t,this.dispatchEvent(Gt),Gt.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,s=this.children.length;n<s;n++){const l=this.children[n].getObjectByProperty(t,e);if(l!==void 0)return l}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(te,t,ci),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(te,ui,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,s=e.length;n<s;n++){const o=e[n];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(t)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let a=0,p=h.length;a<p;a++){const d=h[a];o(t.shapes,d)}else o(t.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,a=this.material.length;h<a;h++)u.push(o(t.materials,this.material[h]));s.material=u}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(t.animations,h))}}if(e){const u=l(t.geometries),h=l(t.materials),a=l(t.textures),p=l(t.images),d=l(t.shapes),y=l(t.skeletons),f=l(t.animations),w=l(t.nodes);u.length>0&&(n.geometries=u),h.length>0&&(n.materials=h),a.length>0&&(n.textures=a),p.length>0&&(n.images=p),d.length>0&&(n.shapes=d),y.length>0&&(n.skeletons=y),f.length>0&&(n.animations=f),w.length>0&&(n.nodes=w)}return n.object=s,n;function l(u){const h=[];for(const a in u){const p=u[a];delete p.metadata,h.push(p)}return h}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const s=t.children[n];this.add(s.clone())}return this}}Bt.DEFAULT_UP=new $(0,1,0),Bt.DEFAULT_MATRIX_AUTO_UPDATE=!0,Bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ut=di();function di(){const g=new ArrayBuffer(4),t=new Float32Array(g),e=new Uint32Array(g),n=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const a=h-127;a<-27?(n[h]=0,n[h|256]=32768,s[h]=24,s[h|256]=24):a<-14?(n[h]=1024>>-a-14,n[h|256]=1024>>-a-14|32768,s[h]=-a-1,s[h|256]=-a-1):a<=15?(n[h]=a+15<<10,n[h|256]=a+15<<10|32768,s[h]=13,s[h|256]=13):a<128?(n[h]=31744,n[h|256]=64512,s[h]=24,s[h|256]=24):(n[h]=31744,n[h|256]=64512,s[h]=13,s[h|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let a=h<<13,p=0;for(;!(a&8388608);)a<<=1,p-=8388608;a&=-8388609,p+=947912704,o[h]=a|p}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function mi(g){Math.abs(g)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),g=bt(g,-65504,65504),Ut.floatView[0]=g;const t=Ut.uint32View[0],e=t>>23&511;return Ut.baseTable[e]+((t&8388607)>>Ut.shiftTable[e])}function fi(g){const t=g>>10;return Ut.uint32View[0]=Ut.mantissaTable[Ut.offsetTable[t]+(g&1023)]+Ut.exponentTable[t],Ut.floatView[0]}const We={toHalfFloat:mi,fromHalfFloat:fi};class yi extends vt{constructor(t,e,n,s,o,l,u,h,a,p=1026){if(p!==1026&&p!==1027)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===1026&&(n=1014),n===void 0&&p===1027&&(n=1020),super(null,s,o,l,u,h,p,n,a),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=u!==void 0?u:1003,this.minFilter=h!==void 0?h:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}const xi=new yi(1,1);xi.compareFunction=515;class _i extends vt{constructor(t=null,e=1,n=1,s,o,l,u,h,a=1003,p=1003,d,y){super(null,l,u,h,a,p,s,o,d,y),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Be={enabled:!1,files:{},add:function(g,t){this.enabled!==!1&&(this.files[g]=t)},get:function(g){if(this.enabled!==!1)return this.files[g]},remove:function(g){delete this.files[g]},clear:function(){this.files={}}};class gi{constructor(t,e,n){const s=this;let o=!1,l=0,u=0,h;const a=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(p){u++,o===!1&&s.onStart!==void 0&&s.onStart(p,l,u),o=!0},this.itemEnd=function(p){l++,s.onProgress!==void 0&&s.onProgress(p,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(p){s.onError!==void 0&&s.onError(p)},this.resolveURL=function(p){return h?h(p):p},this.setURLModifier=function(p){return h=p,this},this.addHandler=function(p,d){return a.push(p,d),this},this.removeHandler=function(p){const d=a.indexOf(p);return d!==-1&&a.splice(d,2),this},this.getHandler=function(p){for(let d=0,y=a.length;d<y;d+=2){const f=a[d],w=a[d+1];if(f.global&&(f.lastIndex=0),f.test(p))return w}return null}}}const wi=new gi;class Me{constructor(t){this.manager=t!==void 0?t:wi,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(s,o){n.load(t,s,e,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Me.DEFAULT_MATERIAL_NAME="__DEFAULT";const Rt={};class Mi extends Error{constructor(t,e){super(t),this.response=e}}class bi extends Me{constructor(t){super(t)}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Be.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(Rt[t]!==void 0){Rt[t].push({onLoad:e,onProgress:n,onError:s});return}Rt[t]=[],Rt[t].push({onLoad:e,onProgress:n,onError:s});const l=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(a=>{if(a.status===200||a.status===0){if(a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||a.body===void 0||a.body.getReader===void 0)return a;const p=Rt[t],d=a.body.getReader(),y=a.headers.get("X-File-Size")||a.headers.get("Content-Length"),f=y?parseInt(y):0,w=f!==0;let z=0;const k=new ReadableStream({start(U){V();function V(){d.read().then(({done:D,value:Y})=>{if(D)U.close();else{z+=Y.byteLength;const H=new ProgressEvent("progress",{lengthComputable:w,loaded:z,total:f});for(let q=0,L=p.length;q<L;q++){const Mt=p[q];Mt.onProgress&&Mt.onProgress(H)}U.enqueue(Y),V()}},D=>{U.error(D)})}}});return new Response(k)}else throw new Mi(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`,a)}).then(a=>{switch(h){case"arraybuffer":return a.arrayBuffer();case"blob":return a.blob();case"document":return a.text().then(p=>new DOMParser().parseFromString(p,u));case"json":return a.json();default:if(u===void 0)return a.text();{const d=/charset="?([^;"\s]*)"?/i.exec(u),y=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(y);return a.arrayBuffer().then(w=>f.decode(w))}}}).then(a=>{Be.add(t,a);const p=Rt[t];delete Rt[t];for(let d=0,y=p.length;d<y;d++){const f=p[d];f.onLoad&&f.onLoad(a)}}).catch(a=>{const p=Rt[t];if(p===void 0)throw this.manager.itemError(t),a;delete Rt[t];for(let d=0,y=p.length;d<y;d++){const f=p[d];f.onError&&f.onError(a)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Si extends Me{constructor(t){super(t)}load(t,e,n,s){const o=this,l=new _i,u=new bi(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(t,function(h){let a;try{a=o.parse(h)}catch(p){if(s!==void 0)s(p);else{console.error(p);return}}a.image!==void 0?l.image=a.image:a.data!==void 0&&(l.image.width=a.width,l.image.height=a.height,l.image.data=a.data),l.wrapS=a.wrapS!==void 0?a.wrapS:1001,l.wrapT=a.wrapT!==void 0?a.wrapT:1001,l.magFilter=a.magFilter!==void 0?a.magFilter:1006,l.minFilter=a.minFilter!==void 0?a.minFilter:1006,l.anisotropy=a.anisotropy!==void 0?a.anisotropy:1,a.colorSpace!==void 0&&(l.colorSpace=a.colorSpace),a.flipY!==void 0&&(l.flipY=a.flipY),a.format!==void 0&&(l.format=a.format),a.type!==void 0&&(l.type=a.type),a.mipmaps!==void 0&&(l.mipmaps=a.mipmaps,l.minFilter=1008),a.mipmapCount===1&&(l.minFilter=1006),a.generateMipmaps!==void 0&&(l.generateMipmaps=a.generateMipmaps),l.needsUpdate=!0,e&&e(l,a)},n,s),l}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ae}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ae);/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var ct=Uint8Array,Vt=Uint16Array,Ei=Int32Array,Ze=new ct([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ye=new ct([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zi=new ct([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qe=function(g,t){for(var e=new Vt(31),n=0;n<31;++n)e[n]=t+=1<<g[n-1];for(var s=new Ei(e[30]),n=1;n<30;++n)for(var o=e[n];o<e[n+1];++o)s[o]=o-e[n]<<5|n;return{b:e,r:s}},Xe=qe(Ze,2),Ge=Xe.b,Ci=Xe.r;Ge[28]=258,Ci[258]=28;for(var Ti=qe(Ye,0),Ai=Ti.b,be=new Vt(32768),G=0;G<32768;++G){var Pt=(G&43690)>>1|(G&21845)<<1;Pt=(Pt&52428)>>2|(Pt&13107)<<2,Pt=(Pt&61680)>>4|(Pt&3855)<<4,be[G]=((Pt&65280)>>8|(Pt&255)<<8)>>1}for(var ee=function(g,t,e){for(var n=g.length,s=0,o=new Vt(t);s<n;++s)g[s]&&++o[g[s]-1];var l=new Vt(t);for(s=1;s<t;++s)l[s]=l[s-1]+o[s-1]<<1;var u;if(e){u=new Vt(1<<t);var h=15-t;for(s=0;s<n;++s)if(g[s])for(var a=s<<4|g[s],p=t-g[s],d=l[g[s]-1]++<<p,y=d|(1<<p)-1;d<=y;++d)u[be[d]>>h]=a}else for(u=new Vt(n),s=0;s<n;++s)g[s]&&(u[s]=be[l[g[s]-1]++]>>15-g[s]);return u},ie=new ct(288),G=0;G<144;++G)ie[G]=8;for(var G=144;G<256;++G)ie[G]=9;for(var G=256;G<280;++G)ie[G]=7;for(var G=280;G<288;++G)ie[G]=8;for(var Ve=new ct(32),G=0;G<32;++G)Ve[G]=5;var vi=ee(ie,9,1),Ii=ee(Ve,5,1),Se=function(g){for(var t=g[0],e=1;e<g.length;++e)g[e]>t&&(t=g[e]);return t},gt=function(g,t,e){var n=t/8|0;return(g[n]|g[n+1]<<8)>>(t&7)&e},Ee=function(g,t){var e=t/8|0;return(g[e]|g[e+1]<<8|g[e+2]<<16)>>(t&7)},Fi=function(g){return(g+7)/8|0},Ui=function(g,t,e){return(t==null||t<0)&&(t=0),(e==null||e>g.length)&&(e=g.length),new ct(g.subarray(t,e))},Ri=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wt=function(g,t,e){var n=new Error(t||Ri[g]);if(n.code=g,Error.captureStackTrace&&Error.captureStackTrace(n,wt),!e)throw n;return n},ki=function(g,t,e,n){var s=g.length,o=n?n.length:0;if(!s||t.f&&!t.l)return e||new ct(0);var l=!e,u=l||t.i!=2,h=t.i;l&&(e=new ct(s*3));var a=function(ne){var pe=e.length;if(ne>pe){var se=new ct(Math.max(pe*2,ne));se.set(e),e=se}},p=t.f||0,d=t.p||0,y=t.b||0,f=t.l,w=t.d,z=t.m,k=t.n,U=s*8;do{if(!f){p=gt(g,d,1);var V=gt(g,d+1,3);if(d+=3,V)if(V==1)f=vi,w=Ii,z=9,k=5;else if(V==2){var q=gt(g,d,31)+257,L=gt(g,d+10,15)+4,Mt=q+gt(g,d+5,31)+1;d+=14;for(var ut=new ct(Mt),St=new ct(19),K=0;K<L;++K)St[zi[K]]=gt(g,d+K*3,7);d+=L*3;for(var et=Se(St),kt=(1<<et)-1,pt=ee(St,et,1),K=0;K<Mt;){var Ot=pt[gt(g,d,kt)];d+=Ot&15;var D=Ot>>4;if(D<16)ut[K++]=D;else{var at=0,dt=0;for(D==16?(dt=3+gt(g,d,3),d+=2,at=ut[K-1]):D==17?(dt=3+gt(g,d,7),d+=3):D==18&&(dt=11+gt(g,d,127),d+=7);dt--;)ut[K++]=at}}var Et=ut.subarray(0,q),st=ut.subarray(q);z=Se(Et),k=Se(st),f=ee(Et,z,1),w=ee(st,k,1)}else wt(1);else{var D=Fi(d)+4,Y=g[D-4]|g[D-3]<<8,H=D+Y;if(H>s){h&&wt(0);break}u&&a(y+Y),e.set(g.subarray(D,H),y),t.b=y+=Y,t.p=d=H*8,t.f=p;continue}if(d>U){h&&wt(0);break}}u&&a(y+131072);for(var rt=(1<<z)-1,zt=(1<<k)-1,mt=d;;mt=d){var at=f[Ee(g,d)&rt],Ct=at>>4;if(d+=at&15,d>U){h&&wt(0);break}if(at||wt(2),Ct<256)e[y++]=Ct;else if(Ct==256){mt=d,f=null;break}else{var Jt=Ct-254;if(Ct>264){var K=Ct-257,Ht=Ze[K];Jt=gt(g,d,(1<<Ht)-1)+Ge[K],d+=Ht}var B=w[Ee(g,d)&zt],Tt=B>>4;B||wt(3),d+=B&15;var st=Ai[Tt];if(Tt>3){var Ht=Ye[Tt];st+=Ee(g,d)&(1<<Ht)-1,d+=Ht}if(d>U){h&&wt(0);break}u&&a(y+131072);var Nt=y+Jt;if(y<st){var ue=o-st,ze=Math.min(st,Nt);for(ue+y<0&&wt(3);y<ze;++y)e[y]=n[ue+y]}for(;y<Nt;++y)e[y]=e[y-st]}}t.l=f,t.p=mt,t.b=y,t.f=p,f&&(p=1,t.m=z,t.d=w,t.n=k)}while(!p);return y!=e.length&&l?Ui(e,0,y):e.subarray(0,y)},Oi=new ct(0),Ni=function(g,t){return((g[0]&15)!=8||g[0]>>4>7||(g[0]<<8|g[1])%31)&&wt(6,"invalid zlib data"),(g[1]>>5&1)==+!t&&wt(6,"invalid zlib data: "+(g[1]&32?"need":"unexpected")+" dictionary"),(g[1]>>3&4)+2};function ce(g,t){return ki(g.subarray(Ni(g,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Li=typeof TextDecoder<"u"&&new TextDecoder,Di=0;try{Li.decode(Oi,{stream:!0}),Di=1}catch{}class Pi extends Si{constructor(t){super(t),this.type=1016}parse(t){const ut=Math.pow(2.7182818,2.2);function St(i,r){let c=0;for(let _=0;_<65536;++_)(_==0||i[_>>3]&1<<(_&7))&&(r[c++]=_);const m=c-1;for(;c<65536;)r[c++]=0;return m}function K(i){for(let r=0;r<16384;r++)i[r]={},i[r].len=0,i[r].lit=0,i[r].p=null}const et={l:0,c:0,lc:0};function kt(i,r,c,m,_){for(;c<i;)r=r<<8|Ke(m,_),c+=8;c-=i,et.l=r>>c&(1<<i)-1,et.c=r,et.lc=c}const pt=new Array(59);function Ot(i){for(let c=0;c<=58;++c)pt[c]=0;for(let c=0;c<65537;++c)pt[i[c]]+=1;let r=0;for(let c=58;c>0;--c){const m=r+pt[c]>>1;pt[c]=r,r=m}for(let c=0;c<65537;++c){const m=i[c];m>0&&(i[c]=m|pt[m]++<<6)}}function at(i,r,c,m,_,x){const S=r;let C=0,E=0;for(;m<=_;m++){if(S.value-r.value>c)return!1;kt(6,C,E,i,S);const b=et.l;if(C=et.c,E=et.lc,x[m]=b,b==63){if(S.value-r.value>c)throw new Error("Something wrong with hufUnpackEncTable");kt(8,C,E,i,S);let M=et.l+6;if(C=et.c,E=et.lc,m+M>_+1)throw new Error("Something wrong with hufUnpackEncTable");for(;M--;)x[m++]=0;m--}else if(b>=59){let M=b-59+2;if(m+M>_+1)throw new Error("Something wrong with hufUnpackEncTable");for(;M--;)x[m++]=0;m--}}Ot(x)}function dt(i){return i&63}function Et(i){return i>>6}function st(i,r,c,m){for(;r<=c;r++){const _=Et(i[r]),x=dt(i[r]);if(_>>x)throw new Error("Invalid table entry");if(x>14){const S=m[_>>x-14];if(S.len)throw new Error("Invalid table entry");if(S.lit++,S.p){const C=S.p;S.p=new Array(S.lit);for(let E=0;E<S.lit-1;++E)S.p[E]=C[E]}else S.p=new Array(1);S.p[S.lit-1]=r}else if(x){let S=0;for(let C=1<<14-x;C>0;C--){const E=m[(_<<14-x)+S];if(E.len||E.p)throw new Error("Invalid table entry");E.len=x,E.lit=r,S++}}}return!0}const rt={c:0,lc:0};function zt(i,r,c,m){i=i<<8|Ke(c,m),r+=8,rt.c=i,rt.lc=r}const mt={c:0,lc:0};function Ct(i,r,c,m,_,x,S,C,E){if(i==r){m<8&&(zt(c,m,_,x),c=rt.c,m=rt.lc),m-=8;let b=c>>m;if(b=new Uint8Array([b])[0],C.value+b>E)return!1;const M=S[C.value-1];for(;b-- >0;)S[C.value++]=M}else if(C.value<E)S[C.value++]=i;else return!1;mt.c=c,mt.lc=m}function Jt(i){return i&65535}function Ht(i){const r=Jt(i);return r>32767?r-65536:r}const B={a:0,b:0};function Tt(i,r){const c=Ht(i),_=Ht(r),x=c+(_&1)+(_>>1),S=x,C=x-_;B.a=S,B.b=C}function Nt(i,r){const c=Jt(i),m=Jt(r),_=c-(m>>1)&65535,x=m+_-32768&65535;B.a=x,B.b=_}function ue(i,r,c,m,_,x,S){const C=S<16384,E=c>_?_:c;let b=1,M,T;for(;b<=E;)b<<=1;for(b>>=1,M=b,b>>=1;b>=1;){T=0;const F=T+x*(_-M),A=x*b,O=x*M,v=m*b,R=m*M;let N,Z,Q,lt;for(;T<=F;T+=O){let J=T;const P=T+m*(c-M);for(;J<=P;J+=R){const j=J+v,xt=J+A,tt=xt+v;C?(Tt(i[J+r],i[xt+r]),N=B.a,Q=B.b,Tt(i[j+r],i[tt+r]),Z=B.a,lt=B.b,Tt(N,Z),i[J+r]=B.a,i[j+r]=B.b,Tt(Q,lt),i[xt+r]=B.a,i[tt+r]=B.b):(Nt(i[J+r],i[xt+r]),N=B.a,Q=B.b,Nt(i[j+r],i[tt+r]),Z=B.a,lt=B.b,Nt(N,Z),i[J+r]=B.a,i[j+r]=B.b,Nt(Q,lt),i[xt+r]=B.a,i[tt+r]=B.b)}if(c&b){const j=J+A;C?Tt(i[J+r],i[j+r]):Nt(i[J+r],i[j+r]),N=B.a,i[j+r]=B.b,i[J+r]=N}}if(_&b){let J=T;const P=T+m*(c-M);for(;J<=P;J+=R){const j=J+v;C?Tt(i[J+r],i[j+r]):Nt(i[J+r],i[j+r]),N=B.a,i[j+r]=B.b,i[J+r]=N}}M=b,b>>=1}return T}function ze(i,r,c,m,_,x,S,C,E){let b=0,M=0;const T=S,F=Math.trunc(m.value+(_+7)/8);for(;m.value<F;)for(zt(b,M,c,m),b=rt.c,M=rt.lc;M>=14;){const O=b>>M-14&16383,v=r[O];if(v.len)M-=v.len,Ct(v.lit,x,b,M,c,m,C,E,T),b=mt.c,M=mt.lc;else{if(!v.p)throw new Error("hufDecode issues");let R;for(R=0;R<v.lit;R++){const N=dt(i[v.p[R]]);for(;M<N&&m.value<F;)zt(b,M,c,m),b=rt.c,M=rt.lc;if(M>=N&&Et(i[v.p[R]])==(b>>M-N&(1<<N)-1)){M-=N,Ct(v.p[R],x,b,M,c,m,C,E,T),b=mt.c,M=mt.lc;break}}if(R==v.lit)throw new Error("hufDecode issues")}}const A=8-_&7;for(b>>=A,M-=A;M>0;){const O=r[b<<14-M&16383];if(O.len)M-=O.len,Ct(O.lit,x,b,M,c,m,C,E,T),b=mt.c,M=mt.lc;else throw new Error("hufDecode issues")}return!0}function ne(i,r,c,m,_,x){const S={value:0},C=c.value,E=yt(r,c),b=yt(r,c);c.value+=4;const M=yt(r,c);if(c.value+=4,E<0||E>=65537||b<0||b>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const T=new Array(65537),F=new Array(16384);K(F);const A=m-(c.value-C);if(at(i,c,A,E,b,T),M>8*(m-(c.value-C)))throw new Error("Something wrong with hufUncompress");st(T,E,b,F),ze(T,F,i,c,M,b,x,_,S)}function pe(i,r,c){for(let m=0;m<c;++m)r[m]=i[r[m]]}function se(i){for(let r=1;r<i.length;r++){const c=i[r-1]+i[r]-128;i[r]=c}}function Je(i,r){let c=0,m=Math.floor((i.length+1)/2),_=0;const x=i.length-1;for(;!(_>x||(r[_++]=i[c++],_>x));)r[_++]=i[m++]}function Qe(i){let r=i.byteLength;const c=new Array;let m=0;const _=new DataView(i);for(;r>0;){const x=_.getInt8(m++);if(x<0){const S=-x;r-=S+1;for(let C=0;C<S;C++)c.push(_.getUint8(m++))}else{const S=x;r-=2;const C=_.getUint8(m++);for(let E=0;E<S+1;E++)c.push(C)}}return c}function Wi(i,r,c,m,_,x){let S=new DataView(x.buffer);const C=c[i.idx[0]].width,E=c[i.idx[0]].height,b=3,M=Math.floor(C/8),T=Math.ceil(C/8),F=Math.ceil(E/8),A=C-(T-1)*8,O=E-(F-1)*8,v={value:0},R=new Array(b),N=new Array(b),Z=new Array(b),Q=new Array(b),lt=new Array(b);for(let P=0;P<b;++P)lt[P]=r[i.idx[P]],R[P]=P<1?0:R[P-1]+T*F,N[P]=new Float32Array(64),Z[P]=new Uint16Array(64),Q[P]=new Uint16Array(T*64);for(let P=0;P<F;++P){let j=8;P==F-1&&(j=O);let xt=8;for(let W=0;W<T;++W){W==T-1&&(xt=A);for(let X=0;X<b;++X)Z[X].fill(0),Z[X][0]=_[R[X]++],Bi(v,m,Z[X]),Zi(Z[X],N[X]),Yi(N[X]);qi(N);for(let X=0;X<b;++X)Xi(N[X],Q[X],W*64)}let tt=0;for(let W=0;W<b;++W){const X=c[i.idx[W]].type;for(let Lt=8*P;Lt<8*P+j;++Lt){tt=lt[W][Lt];for(let oe=0;oe<M;++oe){const At=oe*64+(Lt&7)*8;S.setUint16(tt+0*2*X,Q[W][At+0],!0),S.setUint16(tt+1*2*X,Q[W][At+1],!0),S.setUint16(tt+2*2*X,Q[W][At+2],!0),S.setUint16(tt+3*2*X,Q[W][At+3],!0),S.setUint16(tt+4*2*X,Q[W][At+4],!0),S.setUint16(tt+5*2*X,Q[W][At+5],!0),S.setUint16(tt+6*2*X,Q[W][At+6],!0),S.setUint16(tt+7*2*X,Q[W][At+7],!0),tt+=8*2*X}}if(M!=T)for(let Lt=8*P;Lt<8*P+j;++Lt){const oe=lt[W][Lt]+8*M*2*X,At=M*64+(Lt&7)*8;for(let me=0;me<xt;++me)S.setUint16(oe+me*2*X,Q[W][At+me],!0)}}}const J=new Uint16Array(C);S=new DataView(x.buffer);for(let P=0;P<b;++P){c[i.idx[P]].decoded=!0;const j=c[i.idx[P]].type;if(c[P].type==2)for(let xt=0;xt<E;++xt){const tt=lt[P][xt];for(let W=0;W<C;++W)J[W]=S.getUint16(tt+W*2*j,!0);for(let W=0;W<C;++W)S.setFloat32(tt+W*2*j,I(J[W]),!0)}}}function Bi(i,r,c){let m,_=1;for(;_<64;)m=r[i.value],m==65280?_=64:m>>8==255?_+=m&255:(c[_]=m,_++),i.value++}function Zi(i,r){r[0]=I(i[0]),r[1]=I(i[1]),r[2]=I(i[5]),r[3]=I(i[6]),r[4]=I(i[14]),r[5]=I(i[15]),r[6]=I(i[27]),r[7]=I(i[28]),r[8]=I(i[2]),r[9]=I(i[4]),r[10]=I(i[7]),r[11]=I(i[13]),r[12]=I(i[16]),r[13]=I(i[26]),r[14]=I(i[29]),r[15]=I(i[42]),r[16]=I(i[3]),r[17]=I(i[8]),r[18]=I(i[12]),r[19]=I(i[17]),r[20]=I(i[25]),r[21]=I(i[30]),r[22]=I(i[41]),r[23]=I(i[43]),r[24]=I(i[9]),r[25]=I(i[11]),r[26]=I(i[18]),r[27]=I(i[24]),r[28]=I(i[31]),r[29]=I(i[40]),r[30]=I(i[44]),r[31]=I(i[53]),r[32]=I(i[10]),r[33]=I(i[19]),r[34]=I(i[23]),r[35]=I(i[32]),r[36]=I(i[39]),r[37]=I(i[45]),r[38]=I(i[52]),r[39]=I(i[54]),r[40]=I(i[20]),r[41]=I(i[22]),r[42]=I(i[33]),r[43]=I(i[38]),r[44]=I(i[46]),r[45]=I(i[51]),r[46]=I(i[55]),r[47]=I(i[60]),r[48]=I(i[21]),r[49]=I(i[34]),r[50]=I(i[37]),r[51]=I(i[47]),r[52]=I(i[50]),r[53]=I(i[56]),r[54]=I(i[59]),r[55]=I(i[61]),r[56]=I(i[35]),r[57]=I(i[36]),r[58]=I(i[48]),r[59]=I(i[49]),r[60]=I(i[57]),r[61]=I(i[58]),r[62]=I(i[62]),r[63]=I(i[63])}function Yi(i){const r=.5*Math.cos(.7853975),c=.5*Math.cos(3.14159/16),m=.5*Math.cos(3.14159/8),_=.5*Math.cos(3*3.14159/16),x=.5*Math.cos(5*3.14159/16),S=.5*Math.cos(3*3.14159/8),C=.5*Math.cos(7*3.14159/16),E=new Array(4),b=new Array(4),M=new Array(4),T=new Array(4);for(let F=0;F<8;++F){const A=F*8;E[0]=m*i[A+2],E[1]=S*i[A+2],E[2]=m*i[A+6],E[3]=S*i[A+6],b[0]=c*i[A+1]+_*i[A+3]+x*i[A+5]+C*i[A+7],b[1]=_*i[A+1]-C*i[A+3]-c*i[A+5]-x*i[A+7],b[2]=x*i[A+1]-c*i[A+3]+C*i[A+5]+_*i[A+7],b[3]=C*i[A+1]-x*i[A+3]+_*i[A+5]-c*i[A+7],M[0]=r*(i[A+0]+i[A+4]),M[3]=r*(i[A+0]-i[A+4]),M[1]=E[0]+E[3],M[2]=E[1]-E[2],T[0]=M[0]+M[1],T[1]=M[3]+M[2],T[2]=M[3]-M[2],T[3]=M[0]-M[1],i[A+0]=T[0]+b[0],i[A+1]=T[1]+b[1],i[A+2]=T[2]+b[2],i[A+3]=T[3]+b[3],i[A+4]=T[3]-b[3],i[A+5]=T[2]-b[2],i[A+6]=T[1]-b[1],i[A+7]=T[0]-b[0]}for(let F=0;F<8;++F)E[0]=m*i[16+F],E[1]=S*i[16+F],E[2]=m*i[48+F],E[3]=S*i[48+F],b[0]=c*i[8+F]+_*i[24+F]+x*i[40+F]+C*i[56+F],b[1]=_*i[8+F]-C*i[24+F]-c*i[40+F]-x*i[56+F],b[2]=x*i[8+F]-c*i[24+F]+C*i[40+F]+_*i[56+F],b[3]=C*i[8+F]-x*i[24+F]+_*i[40+F]-c*i[56+F],M[0]=r*(i[F]+i[32+F]),M[3]=r*(i[F]-i[32+F]),M[1]=E[0]+E[3],M[2]=E[1]-E[2],T[0]=M[0]+M[1],T[1]=M[3]+M[2],T[2]=M[3]-M[2],T[3]=M[0]-M[1],i[0+F]=T[0]+b[0],i[8+F]=T[1]+b[1],i[16+F]=T[2]+b[2],i[24+F]=T[3]+b[3],i[32+F]=T[3]-b[3],i[40+F]=T[2]-b[2],i[48+F]=T[1]-b[1],i[56+F]=T[0]-b[0]}function qi(i){for(let r=0;r<64;++r){const c=i[0][r],m=i[1][r],_=i[2][r];i[0][r]=c+1.5747*_,i[1][r]=c-.1873*m-.4682*_,i[2][r]=c+1.8556*m}}function Xi(i,r,c){for(let m=0;m<64;++m)r[c+m]=We.toHalfFloat(Gi(i[m]))}function Gi(i){return i<=1?Math.sign(i)*Math.pow(Math.abs(i),2.2):Math.sign(i)*Math.pow(ut,Math.abs(i)-1)}function Ce(i){return new DataView(i.array.buffer,i.offset.value,i.size)}function Vi(i){const r=i.viewer.buffer.slice(i.offset.value,i.offset.value+i.size),c=new Uint8Array(Qe(r)),m=new Uint8Array(c.length);return se(c),Je(c,m),new DataView(m.buffer)}function Te(i){const r=i.array.slice(i.offset.value,i.offset.value+i.size),c=ce(r),m=new Uint8Array(c.length);return se(c),Je(c,m),new DataView(m.buffer)}function Ji(i){const r=i.viewer,c={value:i.offset.value},m=new Uint16Array(i.columns*i.lines*(i.inputChannels.length*i.type)),_=new Uint8Array(8192);let x=0;const S=new Array(i.inputChannels.length);for(let O=0,v=i.inputChannels.length;O<v;O++)S[O]={},S[O].start=x,S[O].end=S[O].start,S[O].nx=i.columns,S[O].ny=i.lines,S[O].size=i.type,x+=S[O].nx*S[O].ny*S[O].size;const C=re(r,c),E=re(r,c);if(E>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(C<=E)for(let O=0;O<E-C+1;O++)_[O+C]=Wt(r,c);const b=new Uint16Array(65536),M=St(_,b),T=yt(r,c);ne(i.array,r,c,T,m,x);for(let O=0;O<i.inputChannels.length;++O){const v=S[O];for(let R=0;R<S[O].size;++R)ue(m,v.start+R,v.nx,v.size,v.ny,v.nx*v.size,M)}pe(b,m,x);let F=0;const A=new Uint8Array(m.buffer.byteLength);for(let O=0;O<i.lines;O++)for(let v=0;v<i.inputChannels.length;v++){const R=S[v],N=R.nx*R.size,Z=new Uint8Array(m.buffer,R.end*2,N*2);A.set(Z,F),F+=N*2,R.end+=N}return new DataView(A.buffer)}function Qi(i){const r=i.array.slice(i.offset.value,i.offset.value+i.size),c=ce(r),m=i.inputChannels.length*i.lines*i.columns*i.totalBytes,_=new ArrayBuffer(m),x=new DataView(_);let S=0,C=0;const E=new Array(4);for(let b=0;b<i.lines;b++)for(let M=0;M<i.inputChannels.length;M++){let T=0;switch(i.inputChannels[M].pixelType){case 1:E[0]=S,E[1]=E[0]+i.columns,S=E[1]+i.columns;for(let A=0;A<i.columns;++A){const O=c[E[0]++]<<8|c[E[1]++];T+=O,x.setUint16(C,T,!0),C+=2}break;case 2:E[0]=S,E[1]=E[0]+i.columns,E[2]=E[1]+i.columns,S=E[2]+i.columns;for(let A=0;A<i.columns;++A){const O=c[E[0]++]<<24|c[E[1]++]<<16|c[E[2]++]<<8;T+=O,x.setUint32(C,T,!0),C+=4}break}}return x}function $e(i){const r=i.viewer,c={value:i.offset.value},m=new Uint8Array(i.columns*i.lines*(i.inputChannels.length*i.type*2)),_={version:ht(r,c),unknownUncompressedSize:ht(r,c),unknownCompressedSize:ht(r,c),acCompressedSize:ht(r,c),dcCompressedSize:ht(r,c),rleCompressedSize:ht(r,c),rleUncompressedSize:ht(r,c),rleRawSize:ht(r,c),totalAcUncompressedCount:ht(r,c),totalDcUncompressedCount:ht(r,c),acCompression:ht(r,c)};if(_.version<2)throw new Error("EXRLoader.parse: "+Zt.compression+" version "+_.version+" is unsupported");const x=new Array;let S=re(r,c)-2;for(;S>0;){const v=de(r.buffer,c),R=Wt(r,c),N=R>>2&3,Z=(R>>4)-1,Q=new Int8Array([Z])[0],lt=Wt(r,c);x.push({name:v,index:Q,type:lt,compression:N}),S-=v.length+3}const C=Zt.channels,E=new Array(i.inputChannels.length);for(let v=0;v<i.inputChannels.length;++v){const R=E[v]={},N=C[v];R.name=N.name,R.compression=0,R.decoded=!1,R.type=N.pixelType,R.pLinear=N.pLinear,R.width=i.columns,R.height=i.lines}const b={idx:new Array(3)};for(let v=0;v<i.inputChannels.length;++v){const R=E[v];for(let N=0;N<x.length;++N){const Z=x[N];R.name==Z.name&&(R.compression=Z.compression,Z.index>=0&&(b.idx[Z.index]=v),R.offset=v)}}let M,T,F;if(_.acCompressedSize>0)switch(_.acCompression){case 0:M=new Uint16Array(_.totalAcUncompressedCount),ne(i.array,r,c,_.acCompressedSize,M,_.totalAcUncompressedCount);break;case 1:const v=i.array.slice(c.value,c.value+_.totalAcUncompressedCount),R=ce(v);M=new Uint16Array(R.buffer),c.value+=_.totalAcUncompressedCount;break}if(_.dcCompressedSize>0){const v={array:i.array,offset:c,size:_.dcCompressedSize};T=new Uint16Array(Te(v).buffer),c.value+=_.dcCompressedSize}if(_.rleRawSize>0){const v=i.array.slice(c.value,c.value+_.rleCompressedSize),R=ce(v);F=Qe(R.buffer),c.value+=_.rleCompressedSize}let A=0;const O=new Array(E.length);for(let v=0;v<O.length;++v)O[v]=new Array;for(let v=0;v<i.lines;++v)for(let R=0;R<E.length;++R)O[R].push(A),A+=E[R].width*i.type*2;Wi(b,O,E,M,T,m);for(let v=0;v<E.length;++v){const R=E[v];if(!R.decoded)switch(R.compression){case 2:let N=0,Z=0;for(let Q=0;Q<i.lines;++Q){let lt=O[v][N];for(let J=0;J<R.width;++J){for(let P=0;P<2*R.type;++P)m[lt++]=F[Z+P*R.width*R.height];Z++}N++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(m.buffer)}function de(i,r){const c=new Uint8Array(i);let m=0;for(;c[r.value+m]!=0;)m+=1;const _=new TextDecoder().decode(c.slice(r.value,r.value+m));return r.value=r.value+m+1,_}function $i(i,r,c){const m=new TextDecoder().decode(new Uint8Array(i).slice(r.value,r.value+c));return r.value=r.value+c,m}function Ki(i,r){const c=ft(i,r),m=yt(i,r);return[c,m]}function ji(i,r){const c=yt(i,r),m=yt(i,r);return[c,m]}function ft(i,r){const c=i.getInt32(r.value,!0);return r.value=r.value+4,c}function yt(i,r){const c=i.getUint32(r.value,!0);return r.value=r.value+4,c}function Ke(i,r){const c=i[r.value];return r.value=r.value+1,c}function Wt(i,r){const c=i.getUint8(r.value);return r.value=r.value+1,c}const ht=function(i,r){let c;return"getBigInt64"in DataView.prototype?c=Number(i.getBigInt64(r.value,!0)):c=i.getUint32(r.value+4,!0)+Number(i.getUint32(r.value,!0)<<32),r.value+=8,c};function nt(i,r){const c=i.getFloat32(r.value,!0);return r.value+=4,c}function tn(i,r){return We.toHalfFloat(nt(i,r))}function I(i){const r=(i&31744)>>10,c=i&1023;return(i>>15?-1:1)*(r?r===31?c?NaN:1/0:Math.pow(2,r-15)*(1+c/1024):6103515625e-14*(c/1024))}function re(i,r){const c=i.getUint16(r.value,!0);return r.value+=2,c}function en(i,r){return I(re(i,r))}function nn(i,r,c,m){const _=c.value,x=[];for(;c.value<_+m-1;){const S=de(r,c),C=ft(i,c),E=Wt(i,c);c.value+=3;const b=ft(i,c),M=ft(i,c);x.push({name:S,pixelType:C,pLinear:E,xSampling:b,ySampling:M})}return c.value+=1,x}function sn(i,r){const c=nt(i,r),m=nt(i,r),_=nt(i,r),x=nt(i,r),S=nt(i,r),C=nt(i,r),E=nt(i,r),b=nt(i,r);return{redX:c,redY:m,greenX:_,greenY:x,blueX:S,blueY:C,whiteX:E,whiteY:b}}function rn(i,r){const c=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],m=Wt(i,r);return c[m]}function on(i,r){const c=ft(i,r),m=ft(i,r),_=ft(i,r),x=ft(i,r);return{xMin:c,yMin:m,xMax:_,yMax:x}}function an(i,r){const c=["INCREASING_Y","DECREASING_Y","RANDOM_Y"],m=Wt(i,r);return c[m]}function hn(i,r){const c=["ENVMAP_LATLONG","ENVMAP_CUBE"],m=Wt(i,r);return c[m]}function ln(i,r){const c=["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"],m=["ROUND_DOWN","ROUND_UP"],_=yt(i,r),x=yt(i,r),S=Wt(i,r);return{xSize:_,ySize:x,levelMode:c[S&15],roundingMode:m[S>>4]}}function cn(i,r){const c=nt(i,r),m=nt(i,r);return[c,m]}function un(i,r){const c=nt(i,r),m=nt(i,r),_=nt(i,r);return[c,m,_]}function pn(i,r,c,m,_){if(m==="string"||m==="stringvector"||m==="iccProfile")return $i(r,c,_);if(m==="chlist")return nn(i,r,c,_);if(m==="chromaticities")return sn(i,c);if(m==="compression")return rn(i,c);if(m==="box2i")return on(i,c);if(m==="envmap")return hn(i,c);if(m==="tiledesc")return ln(i,c);if(m==="lineOrder")return an(i,c);if(m==="float")return nt(i,c);if(m==="v2f")return cn(i,c);if(m==="v3f")return un(i,c);if(m==="int")return ft(i,c);if(m==="rational")return Ki(i,c);if(m==="timecode")return ji(i,c);if(m==="preview")return c.value+=_,"skipped";c.value+=_}function dn(i,r){const c=Math.log2(i);return r=="ROUND_DOWN"?Math.floor(c):Math.ceil(c)}function mn(i,r,c){let m=0;switch(i.levelMode){case"ONE_LEVEL":m=1;break;case"MIPMAP_LEVELS":m=dn(Math.max(r,c),i.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return m}function je(i,r,c,m){const _=new Array(i);for(let x=0;x<i;x++){const S=1<<x;let C=r/S|0;m=="ROUND_UP"&&C*S<r&&(C+=1);const E=Math.max(C,1);_[x]=(E+c-1)/c|0}return _}function fn(){const i=this,r=i.offset,c={value:0};for(let m=0;m<i.tileCount;m++){const _=ft(i.viewer,r),x=ft(i.viewer,r);r.value+=8,i.size=yt(i.viewer,r);const S=_*i.blockWidth,C=x*i.blockHeight;i.columns=S+i.blockWidth>i.width?i.width-S:i.blockWidth,i.lines=C+i.blockHeight>i.height?i.height-C:i.blockHeight;const E=i.columns*i.totalBytes,M=i.size<i.lines*E?i.uncompress(i):Ce(i);r.value+=i.size;for(let T=0;T<i.lines;T++){const F=T*i.columns*i.totalBytes;for(let A=0;A<i.inputChannels.length;A++){const O=Zt.channels[A].name,v=i.channelByteOffsets[O]*i.columns,R=i.decodeChannels[O];if(R===void 0)continue;c.value=F+v;const N=(i.height-(1+C+T))*i.outLineWidth;for(let Z=0;Z<i.columns;Z++){const Q=N+(Z+S)*i.outputChannels+R;i.byteArray[Q]=i.getter(M,c)}}}}}function yn(){const i=this,r=i.offset,c={value:0};for(let m=0;m<i.height/i.blockHeight;m++){const _=ft(i.viewer,r)-Zt.dataWindow.yMin;i.size=yt(i.viewer,r),i.lines=_+i.blockHeight>i.height?i.height-_:i.blockHeight;const x=i.columns*i.totalBytes,C=i.size<i.lines*x?i.uncompress(i):Ce(i);r.value+=i.size;for(let E=0;E<i.blockHeight;E++){const b=m*i.blockHeight,M=E+i.scanOrder(b);if(M>=i.height)continue;const T=E*x,F=(i.height-1-M)*i.outLineWidth;for(let A=0;A<i.inputChannels.length;A++){const O=Zt.channels[A].name,v=i.channelByteOffsets[O]*i.columns,R=i.decodeChannels[O];if(R!==void 0){c.value=T+v;for(let N=0;N<i.columns;N++){const Z=F+N*i.outputChannels+R;i.byteArray[Z]=i.getter(C,c)}}}}}}function xn(i,r,c){const m={};if(i.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");m.version=i.getUint8(4);const _=i.getUint8(5);m.spec={singleTile:!!(_&2),longName:!!(_&4),deepFormat:!!(_&8),multiPart:!!(_&16)},c.value=8;let x=!0;for(;x;){const S=de(r,c);if(S==0)x=!1;else{const C=de(r,c),E=yt(i,c),b=pn(i,r,c,C,E);b===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${C}'.`):m[S]=b}}if(_&-7)throw console.error("THREE.EXRHeader:",m),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return m}function _n(i,r,c,m,_){const x={size:0,viewer:r,array:c,offset:m,width:i.dataWindow.xMax-i.dataWindow.xMin+1,height:i.dataWindow.yMax-i.dataWindow.yMin+1,inputChannels:i.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:Ie};switch(i.compression){case"NO_COMPRESSION":x.blockHeight=1,x.uncompress=Ce;break;case"RLE_COMPRESSION":x.blockHeight=1,x.uncompress=Vi;break;case"ZIPS_COMPRESSION":x.blockHeight=1,x.uncompress=Te;break;case"ZIP_COMPRESSION":x.blockHeight=16,x.uncompress=Te;break;case"PIZ_COMPRESSION":x.blockHeight=32,x.uncompress=Ji;break;case"PXR24_COMPRESSION":x.blockHeight=16,x.uncompress=Qi;break;case"DWAA_COMPRESSION":x.blockHeight=32,x.uncompress=$e;break;case"DWAB_COMPRESSION":x.blockHeight=256,x.uncompress=$e;break;default:throw new Error("EXRLoader.parse: "+i.compression+" is unsupported")}const S={};for(const M of i.channels)switch(M.name){case"Y":case"R":case"G":case"B":case"A":S[M.name]=!0,x.type=M.pixelType}let C=!1;if(S.R&&S.G&&S.B)C=!S.A,x.outputChannels=4,x.decodeChannels={R:0,G:1,B:2,A:3};else if(S.Y)x.outputChannels=1,x.decodeChannels={Y:0};else throw new Error("EXRLoader.parse: file contains unsupported data channels.");if(x.type==1)switch(_){case 1015:x.getter=en;break;case 1016:x.getter=re;break}else if(x.type==2)switch(_){case 1015:x.getter=nt;break;case 1016:x.getter=tn}else throw new Error("EXRLoader.parse: unsupported pixelType "+x.type+" for "+i.compression+".");x.columns=x.width;const E=x.width*x.height*x.outputChannels;switch(_){case 1015:x.byteArray=new Float32Array(E),C&&x.byteArray.fill(1,0,E);break;case 1016:x.byteArray=new Uint16Array(E),C&&x.byteArray.fill(15360,0,E);break;default:console.error("THREE.EXRLoader: unsupported type: ",_);break}let b=0;for(const M of i.channels)x.decodeChannels[M.name]!==void 0&&(x.channelByteOffsets[M.name]=b),b+=M.pixelType*2;if(x.totalBytes=b,x.outLineWidth=x.width*x.outputChannels,i.lineOrder==="INCREASING_Y"?x.scanOrder=M=>M:x.scanOrder=M=>x.height-1-M,x.outputChannels==4?(x.format=1023,x.colorSpace=Ie):(x.format=1028,x.colorSpace=ve),i.spec.singleTile){x.blockHeight=i.tiles.ySize,x.blockWidth=i.tiles.xSize;const M=mn(i.tiles,x.width,x.height),T=je(M,x.width,i.tiles.xSize,i.tiles.roundingMode),F=je(M,x.height,i.tiles.ySize,i.tiles.roundingMode);x.tileCount=T[0]*F[0];for(let A=0;A<M;A++)for(let O=0;O<F[A];O++)for(let v=0;v<T[A];v++)ht(r,m);x.decode=fn.bind(x)}else{x.blockWidth=x.width;const M=Math.ceil(x.height/x.blockHeight);for(let T=0;T<M;T++)ht(r,m);x.decode=yn.bind(x)}return x}const ti={value:0},ei=new DataView(t),gn=new Uint8Array(t),Zt=xn(ei,t,ti),Qt=_n(Zt,ei,gn,ti,this.type);return Qt.decode(),{header:Zt,width:Qt.width,height:Qt.height,data:Qt.byteArray,format:Qt.format,colorSpace:Qt.colorSpace,type:this.type}}setDataType(t){return this.type=t,this}load(t,e,n,s){function o(l,u){l.colorSpace=u.colorSpace,l.minFilter=1006,l.magFilter=1006,l.generateMipmaps=!1,l.flipY=!1,e&&e(l,u)}return super.load(t,o,n,s)}}const Hi=new Pi;onmessage=g=>{Hi.load(g.data.url,(t,e)=>{postMessage(e,[e.data.buffer])},null,()=>{postMessage({error:!0})})}})();
